<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>RDS Projects</title>
    <!-- Favicon-->
    <link rel="icon" href="images/favicon.png" type="image/x-icon">

    <!-- Plugins Core Css -->
    <link href="~/css/app.min.css" rel="stylesheet">

    <!-- Custom Css -->
    <link href="~/css/style.css" rel="stylesheet">
    <title>@ViewBag.Title</title>
    <style>

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            margin: 0;
        }
    </style>
</head>
<body class="horizontal-layout">
    <nav class="navbar">
        <div class="container-fluid">
            <div class="navbar-header">
                <a href="#" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"
                   aria-expanded="false"></a>
                <a href="#" class="bars"></a>
                <a class="navbar-brand" href="#">
                    <img src="~/Images/logo.png" alt="" />
                </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="horizontal-list">
                    <li>  @Html.ActionLink("Dashboard", "ProjectList", "Home", new { area = "" }, null)</li>
                    <li>  @Html.ActionLink("Create Project", "Index", "Home", new { area = "" }, null)</li>
                    <li>@Html.ActionLink("API", "Index", "Help", new { area = "" }, null)</li>
                </ul>
            </div>
        </div>
    </nav>
    <section class="content">
        <div class="container-fluid">
            @RenderBody()
            <hr />

            <footer></footer>
        </div>
    </section>
    <div id="wait" style="display:none;width:69px;height:89px;border:1px solid black;position:absolute;top:90%;left:50%;padding:2px;"><img src='~/Images/demo_wait.gif' width="64" height="64" /><br>Loading..</div>
    @RenderSection("scripts", required: false)
</body>
</html>

<script src="~/js/app.min.js"></script>
<script src="~/js/table.min.js"></script>

<!-- Custom Js -->
<script src="~/js/admin.js"></script>
<script src="~/js/dataTables.buttons.min.js"></script>
<script src="~/js/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="~/js/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
<script src="~/js/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
<script src="~/js/buttons.html5.min.js"></script>
<script src="~/js/pages/tables/jquery-datatable.js"></script>
<script type="text/javascript">

     $("#btnContractDWGSUpload").click(function (e) {

         var data = new FormData();
         var projectId = $('#ProejctId').val();
         data.append("projectId",$('#ProejctId').val())
         var files = $("#ContractDWGS").get(0).files;
         if (files.length > 0) {
             for ( i = 0; i< files.length; i++)
    {
         data.append(i.toString(), files[i]);

    }

         } else {
             return false;
         }
   $.ajax({
                url: '@Url.Action("UploadDocuments","Home")', type: "POST", processData: false,
                data: data, dataType: 'json',
       contentType: false,
       beforeSend: function () {

               $("#wait").css("display", "block");

       },
                success: function (response) {
                    if (response != null || response != '')
                        $.ajax({
                            contentType: 'application/html; charset=utf-8',
                             type: 'GET',
                             dataType: 'html',
                            data: { "id": projectId },
                       url : '@Url.Action("GetContractDwgs", "Home")',

                           success: function (result) {
                               $('#dvContractDwgs').html(result);
                               $('#ContractDWGS').val('')
                            },
                            error: function (xhr, status) {
alert(status) ;
}
                      });

                },
       error: function (er) { },
       complete: function () {

            $("#wait").css("display", "none");
       }

            });
     });

    $("#btnRFIResponseUpload").click(function (e) {

         var data = new FormData();
         var projectId = $('#ProejctId').val();
         data.append("projectId",$('#ProejctId').val())
         var files = $("#RFIResponses").get(0).files;
        if (files.length > 0)
        {
              for ( i = 0; i< files.length; i++)
    {
         data.append(i.toString(), files[i]);

    }
        }
        else return false;
   $.ajax({
                url: '@Url.Action("UploadRFIDocuments","Home")', type: "POST", processData: false,
                data: data, dataType: 'json',
       contentType: false, beforeSend: function () {

               $("#wait").css("display", "block");

       },

                success: function (response) {
                    if (response != null || response != '')
                        $.ajax({
                            contentType: 'application/html; charset=utf-8',
                             type: 'GET',
                             dataType: 'html',
                            data: { "id": projectId },
                       url : '@Url.Action("GeetRFIResponses", "Home")',

                           success: function (result) {
                               $('#dvRfiResponses').html(result);
                               $('#RFIResponses').val('')
                            },
                            error: function (xhr, status) {
alert(status) ;
                            }
                            ,
       complete: function () {

            $("#wait").css("display", "none");
       }
                      });

                },
                error: function (er) { }

            });
});

     $("#btnEngReviewedDrawingsUpload").click(function (e) {

         var data = new FormData();
         var projectId = $('#ProejctId').val();
         data.append("projectId",$('#ProejctId').val())
         var files = $("#EngineerReviewDrawings").get(0).files;
         if (files.length > 0)
         {
              for ( i = 0; i< files.length; i++)
    {
         data.append(i.toString(), files[i]);

    }
         }
         else return false;
   $.ajax({
                url: '@Url.Action("UploadEngineerReviewDocuments","Home")', type: "POST", processData: false,
                data: data, dataType: 'json',
       contentType: false,
                 beforeSend: function () {

               $("#wait").css("display", "block");

       },
                success: function (response) {
                    if (response != null || response != '')
                        $.ajax({
                            contentType: 'application/html; charset=utf-8',
                             type: 'GET',
                             dataType: 'html',
                            data: { "id": projectId },
                       url : '@Url.Action("GetEngineeringReviewedDwgs", "Home")',

                           success: function (result) {
                               $('#dvEngreviewedDwgs').html(result);
                               $('#EngineerReviewDrawings').val('')
                            },
                            error: function (xhr, status) {
alert(status) ;
}
                      });

                },
       error: function (er) { }
                ,
       complete: function () {

            $("#wait").css("display", "none");
       }

            });
});

    $("#btnShopDrawingsUpload").click(function (e) {

         var data = new FormData();
         var projectId = $('#ProejctId').val();
         data.append("projectId",$('#ProejctId').val())
         var files = $("#ShopDrawings").get(0).files;
        if (files.length > 0) {
              for ( i = 0; i< files.length; i++)
    {
         data.append(i.toString(), files[i]);

    }

        }
        else {
            return false;
        }

   $.ajax({
                url: '@Url.Action("UploadShopDrawingDocuments","Home")', type: "POST", processData: false,
                data: data, dataType: 'json',
       contentType: false,
                 beforeSend: function () {

               $("#wait").css("display", "block");

       },
                success: function (response) {
                    if (response != null || response != '')
                        $.ajax({
                            contentType: 'application/html; charset=utf-8',
                             type: 'GET',
                             dataType: 'html',
                            data: { "id": projectId },
                       url : '@Url.Action("GetShopDrawings", "Home")',

                           success: function (result) {
                               $('#dvShopDrawings').html(result);
                               $('#ShopDrawings').val('')
                            },
                            error: function (xhr, status) {
alert(status) ;
}
                      });

                },
       error: function (er) { }
                ,
       complete: function () {

            $("#wait").css("display", "none");
       }

            });
    });
</script>